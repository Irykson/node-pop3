{"version":3,"sources":["../src/Command.js"],"names":["Pop3Command","user","password","host","port","tls","timeout","_PASSInfo","_socket","console","log","info","msgNumber","_connect","stream","str","n","Pop3Connection"],"mappings":";;;;;;;AAAA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEMA,W;;;AACJ,6BAOG;AAAA;;AAAA,QANDC,IAMC,QANDA,IAMC;AAAA,QALDC,QAKC,QALDA,QAKC;AAAA,QAJDC,IAIC,QAJDA,IAIC;AAAA,QAHDC,IAGC,QAHDA,IAGC;AAAA,QAFDC,GAEC,QAFDA,GAEC;AAAA,QADDC,OACC,QADDA,OACC;;AAAA;;AACD,qFAAM;AAAEH,MAAAA,IAAI,EAAJA,IAAF;AAAQC,MAAAA,IAAI,EAAJA,IAAR;AAAcC,MAAAA,GAAG,EAAHA,GAAd;AAAmBC,MAAAA,OAAO,EAAPA;AAAnB,KAAN;AACA,UAAKL,IAAL,GAAYA,IAAZ;AACA,UAAKC,QAAL,GAAgBA,QAAhB;AACA,UAAKK,SAAL,GAAiB,EAAjB;AAJC;AAKF;;;;;;;;;;;;qBAGK,KAAKC,O;;;;;iDACA,KAAKD,S;;;AAEdE,gBAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;;;;AAEAD,gBAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;;gGACoB,M,EAAQ,KAAKT,I;;;AACjCQ,gBAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;gGACmC,M,EAAQ,KAAKR,Q;;;;;AAAzCS,gBAAAA,I;AACPF,gBAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AAEA,qBAAKH,SAAL,GAAiBI,IAAjB;iDACO,KAAKJ,S;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGHK,gBAAAA,S,8DAAY,E;;uBACf,KAAKC,QAAL,E;;;;gGACiC,M,EAAQD,S;;;;;AAAtCE,gBAAAA,M;;uBACS,2BAAcA,MAAd,C;;;AAAZC,gBAAAA,G;kDACC,qBAAQA,GAAR,C;;;;;;;;;;;;;;;;;;;4FAGEH,S;;;;;;;;uBACH,KAAKC,QAAL,E;;;;gGACiC,M,EAAQD,S;;;;;AAAtCE,gBAAAA,M;kDACFA,M;;;;;;;;;;;;;;;;;;;2FAGCF,S;;;;;;;;;;;AAAWI,gBAAAA,C,8DAAI,C;;uBACjB,KAAKH,QAAL,E;;;;gGACiC,K,EAAOD,S,EAAWI,C;;;;;AAAhDF,gBAAAA,M;kDACF,2BAAcA,MAAd,C;;;;;;;;;;;;;;;;;;;;;;;;;;oBAIF,KAAKN,O;;;;;AACR,qBAAKD,SAAL,GAAiB,MAAM,KAAvB;kDACO,KAAKA,S;;;;gGAEqB,M;;;;;AAA5BI,gBAAAA,I;AACP,qBAAKJ,SAAL,GAAiB,MAAMI,IAAvB;kDACO,KAAKJ,S;;;;;;;;;;;;;;;;;;;EAzDUU,sB;;eA6DXjB,W","sourcesContent":["import Pop3Connection from './Connection';\n\nimport { stream2String, listify } from './helper';\n\nclass Pop3Command extends Pop3Connection {\n  constructor({\n    user,\n    password,\n    host,\n    port,\n    tls,\n    timeout,\n  }) {\n    super({ host, port, tls, timeout });\n    this.user = user;\n    this.password = password;\n    this._PASSInfo = '';\n  }\n\n  async _connect() {\n    if (this._socket) {\n      return this._PASSInfo;\n    }\n    console.log('1111');\n    await super.connect();\n    console.log('22222');\n    await super.command('USER', this.user);\n    console.log('3333');\n    const [info] = await super.command('PASS', this.password);\n    console.log('444');\n\n    this._PASSInfo = info;\n    return this._PASSInfo;\n  }\n\n  async UIDL(msgNumber = '') {\n    await this._connect();\n    const [, stream] = await super.command('UIDL', msgNumber);\n    const str = await stream2String(stream);\n    return listify(str);\n  }\n\n  async RETR(msgNumber) {\n    await this._connect();\n    const [, stream] = await super.command('RETR', msgNumber);\n    return stream;\n  }\n\n  async TOP(msgNumber, n = 0) {\n    await this._connect();\n    const [, stream] = await super.command('TOP', msgNumber, n);\n    return stream2String(stream);\n  }\n\n  async QUIT() {\n    if (!this._socket) {\n      this._PASSInfo = '' || 'Bye';\n      return this._PASSInfo;\n    }\n    const [info] = await super.command('QUIT');\n    this._PASSInfo = '' || info;\n    return this._PASSInfo;\n  }\n}\n\nexport default Pop3Command;\n"],"file":"Command.js"}