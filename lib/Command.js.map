{"version":3,"sources":["../src/Command.js"],"names":["value","then","direct","Promise","resolve","Pop3Command","user","password","host","port","tls","timeout","_PASSInfo","_socket","info","msgNumber","_connect","stream","listify","n","Pop3Connection"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AAEA;;;;;;;;;;;;;;AAkFO,gBAAgBA,KAAhB,EAAuBC,IAAvB,EAA6BC,MAA7B,EAAqC;AAC3C,MAAIA,MAAJ,EAAY;AACX,WAAOD,IAAI,GAAGA,IAAI,CAACD,KAAD,CAAP,GAAiBA,KAA5B;AACA;;AACD,MAAI,CAACA,KAAD,IAAU,CAACA,KAAK,CAACC,IAArB,EAA2B;AAC1BD,IAAAA,KAAK,GAAGG,OAAO,CAACC,OAAR,CAAgBJ,KAAhB,CAAR;AACA;;AACD,SAAOC,IAAI,GAAGD,KAAK,CAACC,IAAN,CAAWA,IAAX,CAAH,GAAsBD,KAAjC;AACA;;;;;;;;;;;;;;;;;;;;;;IAtFKK,W;;;AACJ,6BAOG;AAAA;;AAAA,QANDC,IAMC,QANDA,IAMC;AAAA,QALDC,QAKC,QALDA,QAKC;AAAA,QAJDC,IAIC,QAJDA,IAIC;AAAA,QAHDC,IAGC,QAHDA,IAGC;AAAA,QAFDC,GAEC,QAFDA,GAEC;AAAA,QADDC,OACC,QADDA,OACC;;AAAA;;AACD,qFAAM;AAAEH,MAAAA,IAAI,EAAJA,IAAF;AAAQC,MAAAA,IAAI,EAAJA,IAAR;AAAcC,MAAAA,GAAG,EAAHA,GAAd;AAAmBC,MAAAA,OAAO,EAAPA;AAAnB,KAAN;AACA,UAAKL,IAAL,GAAYA,IAAZ;AACA,UAAKC,QAAL,GAAgBA,QAAhB;AACA,UAAKK,SAAL,GAAiB,EAAjB;AAJC;AAKF;;;;;UAEgB;AAAA,qBACX,IADW;;AACf,YAAI,OAAKC,OAAT,EAAkB;AAChB,iBAAO,OAAKD,SAAZ;AACD;;AAHc;AAAA,qGAKK,MALL,EAKa,OAAKN,IALlB;AAAA,uGAMoB,MANpB,EAM4B,OAAKC,QANjC;AAAA;AAAA,kBAMRO,IANQ;;AAOf,qBAAKF,SAAL,GAAiBE,IAAjB;AACA,qBAAO,OAAKF,SAAZ;AARe;AAAA;AAAA;AAShB,O;;;;;;;UAEUG,S,uEAAY,E;;UAAI;AAAA,qBACnB,IADmB;;AAAA,sBACnB,OAAKC,QAAL,EADmB;AAAA,qGAEc,MAFd,EAEsBD,SAFtB;AAAA;AAAA,gBAEhBE,MAFgB;;AAAA,0BAGP,2BAAcA,MAAd,CAHO,EAIlBC,eAJkB;AAAA;AAAA;AAK1B,O;;;;;;yBAEUH,S;UAAW;AAAA,qBACd,IADc;;AAAA,sBACd,OAAKC,QAAL,EADc;AAAA,qGAEmB,MAFnB,EAE2BD,SAF3B;AAAA;AAAA,gBAEXE,MAFW;;AAGpB,mBAAOA,MAAP;AAHoB;AAAA;AAIrB,O;;;;;;wBAESF,S;UAAWI,C,uEAAI,C;;UAAG;AAAA,qBACpB,IADoB;;AAAA,sBACpB,OAAKH,QAAL,EADoB;AAAA,qGAEa,KAFb,EAEoBD,SAFpB,EAE+BI,CAF/B;AAAA;AAAA,gBAEjBF,MAFiB;;AAG1B,mBAAO,2BAAcA,MAAd,CAAP;AAH0B;AAAA;AAI3B,O;;;;;;;UAEY;AAAA,sBACN,IADM;;AACX,YAAI,CAAC,QAAKJ,OAAV,EAAmB;AACjB,kBAAKD,SAAL,GAAiB,MAAM,KAAvB;AACA,iBAAO,QAAKA,SAAZ;AACD;;AAJU,qGAKwB,MALxB;AAAA;AAAA,cAKJE,IALI;;AAMX,kBAAKF,SAAL,GAAiB,MAAME,IAAvB;AACA,iBAAO,QAAKF,SAAZ;AAPW;AAQZ,O;;;;;;;EArDuBQ,sB;;eAwDXf,W","sourcesContent":["import Pop3Connection from './Connection';\n\nimport { stream2String, listify } from './helper';\n\nexport { stream2String, listify };\n\nclass Pop3Command extends Pop3Connection {\n  constructor({\n    user,\n    password,\n    host,\n    port,\n    tls,\n    timeout,\n  }) {\n    super({ host, port, tls, timeout });\n    this.user = user;\n    this.password = password;\n    this._PASSInfo = '';\n  }\n\n  async _connect() {\n    if (this._socket) {\n      return this._PASSInfo;\n    }\n    await super.connect();\n    await super.command('USER', this.user);\n    const [info] = await super.command('PASS', this.password);\n    this._PASSInfo = info;\n    return this._PASSInfo;\n  }\n\n  async UIDL(msgNumber = '') {\n    await this._connect();\n    const [, stream] = await super.command('UIDL', msgNumber);\n    const str = await stream2String(stream);\n    return listify(str);\n  }\n\n  async RETR(msgNumber) {\n    await this._connect();\n    const [, stream] = await super.command('RETR', msgNumber);\n    return stream;\n  }\n\n  async TOP(msgNumber, n = 0) {\n    await this._connect();\n    const [, stream] = await super.command('TOP', msgNumber, n);\n    return stream2String(stream);\n  }\n\n  async QUIT() {\n    if (!this._socket) {\n      this._PASSInfo = '' || 'Bye';\n      return this._PASSInfo;\n    }\n    const [info] = await super.command('QUIT');\n    this._PASSInfo = '' || info;\n    return this._PASSInfo;\n  }\n}\n\nexport default Pop3Command;\n"],"file":"Command.js"}